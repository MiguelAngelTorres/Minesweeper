#include <iostream>
#include "campominas.h"

 using namespace std;


int main(){
	int filas;
	int columnas;
	int num_minas;
	bool todasabiertas ;
	bool explosion ;

	do{
		cout << "Dime el tamaño del tablero(filas columnas) : " ;
		cin >> filas ;
		cin >> columnas ;
	}while(filas>20 && columnas>20 && filas<0 && columnas<0);

	do{
		cout << "Dime el numero de minas: " ;
		cin >> num_minas ;
	}while(num_minas> filas*columnas);

	Campominas mijuego(filas,columnas,num_minas);
	

	char accion;
	do{
		mijuego.PrettyPrint();
		cout << "\n" << "Dime accion y posicion (letra filas columnas): "; 
		cin >> accion ; 
		cin >> filas ;
		cin >> columnas ;
		if(filas>=0 && filas<mijuego.Filas() && columnas>=0 && columnas<mijuego.Columnas()){			
			if(accion=='a')
				mijuego.Abrir(filas,columnas);
			else if(accion=='m')
					mijuego.Marcar(filas, columnas);
		}
		todasabiertas= mijuego.TodasAbiertas() ;
		explosion= mijuego.TestBoom();
	}while(!todasabiertas && !explosion);
	

	mijuego.Mapa();

	if(explosion){
		cout << endl << endl << "LO SIENTO, NO LO CONSEGUISTE." << endl ;
	}else{
		cout << endl << endl << "¡¡¡ENHORABUENA, HAS COMPLETADO EL JUEGO!!!" << endl ;	
	}
}
